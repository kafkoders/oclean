<!DOCTYPE HTML>
<!--
	Industrious by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->

<!-- Chart code -->

<script>
    
function load_page() {
    $.ajax({
        type: 'GET',
        url: 'http://t24h.es:50002/v1/news',
        crossDomain: true,
        dataType: 'text',
        timeout: 3000,
        success: function(data)
        {
            alert(JSON.parse(data))
            CreateTable(JSON.parse(data).news);
        },
        error: function (data)
        {
            alert("Unknown error ocurred");
        }
    });
}

function CreateTable(requests_array) {

    var default_image = "images/default.jpg";
        
    for (var i = 0; i < requests_array.length; i++) {

        var template = "";
        
        const div = document.createElement('div');

          div.innerHTML = `
            <div class="need2">
                  <div class="need-value">
                    <p class="need-value"><small class="text-muted">{date}, {source}</small></p>
                    <h5 class="card-title">{title}</h5>
                    <p class="card-text">{text}</p>
                    <a href="{link}" id="link_read" class="btn btn-primary">Read more</a>
                  </div>
                <img class="image-problematics20" src="{img}" alt="Card image cap">
            </div>
                            
            <hr class="separador" />
            `;        
        /*
        if (requests_array[i].image.startsWith("https"))
            div.innerHTML = div.innerHTML.replace("{img}", requests_array[i]['image']);
        else
        */
        div.innerHTML = div.innerHTML.replace("{img}", default_image);
        div.innerHTML = div.innerHTML.replace("{date}", requests_array[i]['publicationDate']);
        div.innerHTML = div.innerHTML.replace("{source}", requests_array[i]['newspaper']);
        div.innerHTML = div.innerHTML.replace("{title}", requests_array[i]['title']);
        div.innerHTML = div.innerHTML.replace("{text}", requests_array[i]['description']);
        div.innerHTML = div.innerHTML.replace("{link}", requests_array[i]['url']);
        document.getElementById('Necesidades').appendChild(div);
        
    };

}    
</script>


<html>
	<head>
		<title>Generic Page - Oc(l)ean by TEMPLATED</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload" onload="javascript:load_page()">

		<!-- Header -->
			<header id="header">
				<a class="logo" href="index.html">Oc(l)ean S.L</a>
				<nav>
					<a href="#menu">Menu</a>
				</nav>
			</header>

		<!-- Nav -->
			<nav id="menu">
				<ul class="links">
					<li><a href="index.html">Home</a></li>
                    <li><a href="design.html">Design</a></li>
                    <li><a href="problematics.html">Problematics</a></li>
				    <li><a href="news.html">News and Reports</a></li>
					<li><a href="donations.html">Grants and Donations</a></li>
                    <li><a href="app.html">App</a></li>
				</ul>
			</nav>

		<!-- Heading -->
			<div id="heading" >
				<h1>News and Reports</h1>
			</div>

		<!-- Main -->
        <section id="main" class="wrapper">
				<div class="inner">
					<div class="content">
                        <div class="section" id="Necesidades">

                        </div>
                    </div>
				</div>
        </section>
        <!--
			<section id="main" class="wrapper">
				<div class="inner">
					<div class="container">
                          <div class="row">
                            <div class="col-12">
                                <table class="table table-image">
                                  <thead>
                                    <tr>
                                      <th scope="col">Image</th>
                                      <th scope="col">Article Name</th>
                                    </tr>
                                  </thead>
                                  <tbody id="mytablecontent">
                                    <tr>
                                      <td class="w-25">
                                          <img src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/sheep-3.jpg" class="img-fluid img-thumbnail" alt="Sheep" style="width:350px">
                                      </td>
                                      <td class="">Bootstrap 4 CDN and Starter Template</td>
                                    </tr>
                                    <tr>
                                      <td class="w-25">
                                          <img src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/sheep-5.jpg" class="img-fluid img-thumbnail" alt="Sheep"  style="width:350px">
                                      </td>
                                      <td>Bootstrap Grid 4 Tutorial and Examples</td>
                                    </tr>
                                  </tbody>
                                </table>   
                            </div>
                          </div>
                        </div>
				</div>
			</section>
        -->
		<!-- Footer -->
			<footer id="footer">
				<div class="inner">
					<div class="content">
						<section>
							<h3>Accumsan montes viverra</h3>
							<p>Nunc lacinia ante nunc ac lobortis. Interdum adipiscing gravida odio porttitor sem non mi integer non faucibus ornare mi ut ante amet placerat aliquet. Volutpat eu sed ante lacinia sapien lorem accumsan varius montes viverra nibh in adipiscing. Lorem ipsum dolor vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing sed feugiat eu faucibus. Integer ac sed amet praesent. Nunc lacinia ante nunc ac gravida.</p>
						</section>
						<section>
							<h4>Sem turpis amet semper</h4>
							<ul class="alt">
								<li><a href="#">Dolor pulvinar sed etiam.</a></li>
								<li><a href="#">Etiam vel lorem sed amet.</a></li>
								<li><a href="#">Felis enim feugiat viverra.</a></li>
								<li><a href="#">Dolor pulvinar magna etiam.</a></li>
							</ul>
						</section>
						<section>
							<h4>Magna sed ipsum</h4>
							<ul class="plain">
								<li><a href="#"><i class="icon fa-twitter">&nbsp;</i>Twitter</a></li>
								<li><a href="#"><i class="icon fa-facebook">&nbsp;</i>Facebook</a></li>
								<li><a href="#"><i class="icon fa-instagram">&nbsp;</i>Instagram</a></li>
								<li><a href="#"><i class="icon fa-github">&nbsp;</i>Github</a></li>
							</ul>
						</section>
					</div>
					<div class="copyright">
						&copy; Untitled. Photos <a href="https://unsplash.co">Unsplash</a>, Video <a href="https://coverr.co">Coverr</a>.
					</div>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>